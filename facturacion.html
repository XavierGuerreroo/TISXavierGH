<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facturación - Cafetería Monkey</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1> Modulo: Facturación</h1>
  </header>

  <main>
    <!-- Descripción -->
    <section>
      <h2>Descripción</h2>
      <p>
        El modulo de <strong>Facturación</strong> permite registrar, consultar, 
        actualizar y eliminar facturas de las ventas realizadas, garantizando un control 
        fiscal y administrativo eficiente. 
        Además, gestiona los <strong>pagos múltiples</strong>, 
        los <strong>detalles de productos</strong> y las <strong>cancelaciones</strong>, 
        cumpliendo con los procesos de facturación electrónica requeridos en empresas grandes.
      </p>
    </section>

    <!-- Usuarios -->
    <section>
      <h2>Usuarios del subsistema</h2>
      <ul>
        <li><strong>Cliente</strong></li>
        <li><strong>Dueño</strong></li>
      </ul>
    </section>

   <!-- Requerimientos por usuario - Facturación -->
<!-- Requerimientos por usuario - Facturación -->
<section>
  <h2>Requerimientos por usuario - Facturación</h2>

  <h3>Cliente</h3>
  <p>El cliente debe ser capaz de:</p>
  <ul>
    <li>Registrar una nueva solicitud de factura electrónica proporcionando:
      <ul>
        <li>Nombre</li>
        <li>RFC</li>
        <li>Uso de factura</li>
        <li>Tipo de pago</li>
        <li>Correo electrónico</li>
      </ul>
    </li>
    <li>Solicitar la corrección de una factura emitida, indicando el motivo de la modificación.</li>
    <li>Visualizar sus facturas electrónicas emitidas, consultando información relevante como:
      <ul>
        <li>Fecha de emisión</li>
        <li>Número de folio</li>
        <li>ID o número de cliente</li>
        <li>Importe total</li>
        <li>Método de pago utilizado</li>
      </ul>
    </li>
    <li>Visualizar los productos adquiridos en la factura desde la tabla <em>Carta</em>.</li>
  </ul>

  <h3>Dueño</h3>
  <p>El dueño debe ser capaz de:</p>
  <ul>
    <li>Emitir nuevas facturas electrónicas siguiendo el proceso fiscal completo:
      <ul>
        <li><strong>Generación:</strong> El sistema crea la factura con datos del cliente, productos y montos.</li>
        <li><strong>Validación:</strong> Se verifica que la estructura cumpla con las reglas del SAT.</li>
        <li><strong>Timbrado:</strong> El comprobante se envía al PAC para obtener el sello digital y el UUID.</li>
        <li><strong>Almacenamiento:</strong> El sistema guarda automáticamente el archivo XML y PDF.</li>
        <li><strong>Disponibilidad:</strong> El cliente puede descargar sus facturas en cualquier momento.</li>
      </ul>
    </li>
    <li>Corregir facturas emitidas en caso de errores detectados.</li>
    <li>Cancelar facturas cuando sea necesario, registrando:
      <ul>
        <li>ID del cliente</li>
        <li>Nombre</li>
        <li>Fecha de cancelación</li>
        <li>Motivo</li>
      </ul>
    </li>
    <li>Visualizar las facturas emitidas, accediendo a información clave como:
      <ul>
        <li>Folio fiscal</li>
        <li>Fecha de emisión</li>
        <li>Cliente asociado (ID y nombre)</li>
        <li>Importe total</li>
        <li>Método de pago</li>
        <li>Estado del timbrado (pendiente, timbrada o cancelada)</li>
      </ul>
    </li>
    <li>Consultar facturas por cliente, rango de fechas o folio fiscal.</li>
    <li>Generar reportes de facturación por periodo, método de pago o producto.</li>
  </ul>
</section>


    <!-- Formulario -->
    <section>
      <h2>Formulario - Crear Factura</h2>
      <form>
        <label>Nombre del Cliente: <input type="text" required></label><br>
        <label>Correo: <input type="email" required></label><br>
        <label>Descripción: <input type="text" required></label><br>
        <label>Cantidad: <input type="number" required></label><br>
        <label>Importe: <input type="number" step="0.01" required></label><br>
        <label>Método de pago:
          <select>
            <option>Efectivo</option>
            <option>Tarjeta</option>
            <option>Mixto</option>
          </select>
        </label><br>
        <button type="submit"> Crear Factura</button>
        <a href="index.html" class="btn-back">⬅ Volver</a>
      </form>
    </section>

    <!-- Imagen modelo relacional de Facturación -->
    <section class="diagram">
      <h2>Modelo Relacional - Facturación</h2>
      <p>Diagrama con las tablas <strong>Factura</strong>, <strong>Detalle_Factura</strong>, <strong>Pago</strong> y <strong>Cancelacion</strong>.</p>
      <img src="images/VERDADEROFACTURACION.png" alt="Modelo relacional del subsistema de Facturación">
    </section>

    <!-- Campos de la tabla Factura -->
<section class="campos">
  <h2>Campos - Factura</h2>
  <table>
    <thead>
      <tr>
        <th>Campo</th>
        <th>Tipo / Ejemplo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>ID_Factura</td><td>Entero</td><td>Identificador único de la factura.</td></tr>
      <tr><td>Folio</td><td>"F000123"</td><td>Número consecutivo para control fiscal.</td></tr>
      <tr><td>Fecha</td><td>"2025-09-04"</td><td>Fecha de emisión.</td></tr>
      <tr><td>Descripción</td><td>"3 cafés latte y 2 croissants"</td><td>Concepto de la venta.</td></tr>
      <tr><td>Cantidad</td><td>5</td><td>Número total de productos facturados.</td></tr>
      <tr><td>Importe</td><td>$300.00</td><td>Subtotal sin impuestos.</td></tr>
      <tr><td>Impuestos</td><td>$48.00</td><td>IVA u otros impuestos aplicados.</td></tr>
      <tr><td>Monto_Total</td><td>$348.00</td><td>Total a pagar con impuestos incluidos.</td></tr>
      <tr><td>Método_Pago</td><td>"Efectivo", "Tarjeta", "Mixto"</td><td>Forma de pago.</td></tr>
      <tr><td>ID_Cliente</td><td>(Relación)</td><td>Cliente asociado a la factura.</td></tr>
      <tr><td>UUID</td><td>"550e8400-e29b-41d4-a716-446655440000"</td><td>Identificador fiscal único (SAT).</td></tr>
      <tr><td>Archivo_XML</td><td>"facturas/F000123.xml"</td><td>Archivo digital XML de la factura.</td></tr>
      <tr><td>Archivo_PDF</td><td>"facturas/F000123.pdf"</td><td>Archivo digital PDF de la factura.</td></tr>
      <tr><td>Estatus_Timbrado</td><td>"Pendiente", "Timbrada", "Cancelada"</td><td>Estado de timbrado fiscal.</td></tr>
      <tr><td>Fecha_Timbrado</td><td>"2025-09-04 12:35:20"</td><td>Fecha de certificación.</td></tr>
    </tbody>
  </table>
</section>

<!-- Campos de la tabla Detalle_Factura -->
<section class="campos">
  <h2>Campos - Detalle_Factura</h2>
  <table>
    <thead>
      <tr>
        <th>Campo</th>
        <th>Tipo / Ejemplo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>ID_Detalle</td><td>Entero</td><td>Identificador único del detalle.</td></tr>
      <tr><td>ID_Factura</td><td>(Relación)</td><td>Factura a la que pertenece el detalle.</td></tr>
      <tr><td>Producto</td><td>"Café Latte"</td><td>Nombre del producto.</td></tr>
      <tr><td>Cantidad</td><td>2</td><td>Unidades del producto.</td></tr>
      <tr><td>Precio_Unitario</td><td>$60.00</td><td>Precio por unidad.</td></tr>
      <tr><td>Subtotal</td><td>$120.00</td><td>Total de ese producto.</td></tr>
    </tbody>
  </table>
</section>

<!-- Campos de la tabla Pago -->
<section class="campos">
  <h2>Campos - Pago</h2>
  <table>
    <thead>
      <tr>
        <th>Campo</th>
        <th>Tipo / Ejemplo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>ID_Pago</td><td>Entero</td><td>Identificador único del pago.</td></tr>
      <tr><td>ID_Factura</td><td>(Relación)</td><td>Factura asociada al pago.</td></tr>
      <tr><td>Método_Pago</td><td>"Efectivo", "Tarjeta"</td><td>Forma de pago utilizada.</td></tr>
      <tr><td>Monto</td><td>$500.00</td><td>Cantidad pagada con ese método.</td></tr>
      <tr><td>Fecha_Pago</td><td>"2025-09-22"</td><td>Fecha y hora del pago.</td></tr>
    </tbody>
  </table>
</section>

<!-- Campos de la tabla Cancelacion -->
<section class="campos">
  <h2>Campos - Cancelacion</h2>
  <table>
    <thead>
      <tr>
        <th>Campo</th>
        <th>Tipo / Ejemplo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>ID_Cancelacion</td><td>Entero</td><td>Identificador único de la cancelación.</td></tr>
      <tr><td>ID_Factura</td><td>(Relación)</td><td>Factura cancelada.</td></tr>
      <tr><td>Motivo</td><td>"Error en datos"</td><td>Razón de la cancelación.</td></tr>
      <tr><td>Fecha_Cancelacion</td><td>"2025-09-22"</td><td>Fecha de cancelación.</td></tr>
      <tr><td>Estatus</td><td>"Cancelada"</td><td>Estado de la factura.</td></tr>
    </tbody>
  </table>
</section>


<!-- Campos de la tabla Carta -->
<section class="campos">
  <h2>Campos - Carta</h2>
  <table>
    <thead>
      <tr>
        <th>Campo</th>
        <th>Tipo / Ejemplo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>ID_Carta</td><td>Entero</td><td>Identificador único del producto en la carta.</td></tr>
      <tr><td>Nombre</td><td>"Café Latte"</td><td>Nombre del producto o platillo ofrecido.</td></tr>
      <tr><td>Descripción</td><td>"Café espresso con leche espumosa"</td><td>Detalles o notas del producto.</td></tr>
      <tr><td>Precio</td><td>$60.00</td><td>Costo unitario del producto en la carta.</td></tr>
    </tbody>
  </table>
</section>



  <footer>
    <p>© 2025 Cafetería Monky | Proyecto enfocado en Taller de ingeniería de software</p>
  </footer>
</body>
</html>
